{"version":3,"file":"extension.js","mappings":"k3BAWA,oBAAyBA,GACxBC,QAAQC,IAAI,kCAEZ,MAAMC,EAAaC,EAAOC,SAASC,gBAAgB,kBAAmBC,UAErE,MAAMC,EAASJ,EAAOK,OAAOC,iBAC7B,GAAIF,EAAQ,CACX,MAAMG,EAAYH,EAAOG,UACnBC,EAAeJ,EAAOK,SAASC,QAAQH,GAEzCC,QAuDPL,eAAuCP,EAAkCY,GACvE,MAAMG,QA9CRR,eAAqCP,GACpCC,QAAQC,IAAI,SACZ,MAAMc,QAAkBZ,EAAOa,GAAGC,iBAAiB,CAAC,GACpDF,EAAUG,QAAQC,IACjBnB,QAAQC,IAAI,WAAWkB,EAAEC,oBAAoBD,EAAEE,qBAAqBF,EAAEG,iBAAiBH,EAAEI,QAE1F,MACMC,EADSrB,EAAOsB,UAAUC,iBAAiB,cACrBC,IAAY,gBACxC3B,QAAQC,IAAIuB,GACZ,MAAOI,SAAezB,EAAOa,GAAGC,iBAAiBF,EAAU,IAE3D,IAAIa,EA+BH,MAAO,gFA/BG,CACV,MAAMC,EAAe,CACpB1B,EAAO2B,yBAAyBC,KAAK,g+BAK5BhC,MAEV,IACC,MAAMiC,QAAiBJ,EAAMK,YAAYJ,GACzC,GAAIG,EAAU,CACb,IAAIE,EAAW,GAGf,UAAW,MAAMC,KAAYH,EAASI,KACrCF,GAAYC,EAEb,OAAOD,CACR,CACC,MAAO,kEAET,CAAE,MAAOG,GACR,OAAIA,aAAiBlC,EAAOmC,oBACR,kBAAfD,EAAME,KACF,yGAGF,uIACR,CACD,CAGD,CAEgCC,CAAsB7B,GAG9C8B,EAAQtC,EAAOK,OAAOkC,mBAC1B,kBACA,mBACAvC,EAAOwC,WAAWC,OAClB,CACEC,eAAe,EACfC,yBAAyB,EACzBC,mBAAoB,CAAC5C,EAAO6C,IAAIC,SAASlD,EAAQmD,aAAc,UAAW,WAKxEC,EAAWC,EAAKC,KAAKtD,EAAQmD,aAAaI,OAAQ,UAAW,OAAQ,cAC3E,IAAIC,EAAOC,EAAGC,aAAaN,EAAU,SAErCI,EAAOA,EAAKG,QACV,2BACA,CAACC,EAAOC,IAIC,QAHSnB,EAAMoB,QAAQC,aAC5B3D,EAAO6C,IAAIC,SAASlD,EAAQmD,aAAc,UAAW,OAAQ,SAAUU,QAO7EL,EAAOA,EAAKG,QACV,UACA,oCAAoCK,KAAKC,UAAUlD,wBAGrD2B,EAAMoB,QAAQN,KAAOA,CAiBvB,CA1GUU,CAAwBlE,EAASY,GAEvCR,EAAOK,OAAO0D,uBAAuB,iCAEvC,IAEDnE,EAAQoE,cAAcC,KAAKlE,EAC5B,EAqGA,wBAA+B,EA9H/B,kBACA,YACA,W,sBCNAmE,EAAOC,QAAUC,QAAQ,S,sBCAzBF,EAAOC,QAAUC,QAAQ,K,sBCAzBF,EAAOC,QAAUC,QAAQ,O,GCCrBC,EAA2B,CAAC,ECE5BC,EDCJ,SAASC,EAAoBC,GAE5B,IAAIC,EAAeJ,EAAyBG,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaN,QAGrB,IAAID,EAASG,EAAyBG,GAAY,CAGjDL,QAAS,CAAC,GAOX,OAHAQ,EAAoBH,GAAUI,KAAKV,EAAOC,QAASD,EAAQA,EAAOC,QAASI,GAGpEL,EAAOC,OACf,CCnB0BI,CAAoB,K","sources":["webpack://cat/./src/extension.ts","webpack://cat/external commonjs \"vscode\"","webpack://cat/external node-commonjs \"fs\"","webpack://cat/external node-commonjs \"path\"","webpack://cat/webpack/bootstrap","webpack://cat/webpack/startup"],"sourcesContent":["\"use client\";\n// The module 'vscode' contains the VS Code extensibility API\n// Import the module and reference it with the alias vscode in your code below\nimport { error } from 'console';\nimport * as path from 'path';\nimport * as fs from 'fs';\nimport * as vscode from 'vscode';\n\n// This method is called when your extension is activated\n// Your extension is activated the very first time the command is executed\n\nexport function activate(context: vscode.ExtensionContext) {\n\tconsole.log('Extension \"cat\" is now active!');\n\t// Register the command\n\tconst disposable = vscode.commands.registerCommand('cat.explainCode', async () => {\n\t\t// Logic inside here runs EVERY time the command is triggered\n\t\tconst editor = vscode.window.activeTextEditor;\n\t\tif (editor) {\n\t\t\tconst selection = editor.selection;\n\t\t\tconst selectedText = editor.document.getText(selection);\n\n\t\t\tif (selectedText) {\n\t\t\t\tawait showExplanationMarkdown(context, selectedText);\n\t\t\t} else {\n\t\t\t\tvscode.window.showInformationMessage(\"Please select some code first!\");\n\t\t\t}\n\t\t}\n\t});\n\tcontext.subscriptions.push(disposable);\n}\n\nasync function explainCodeInMarkdown(context: string): Promise<string> {\n\tconsole.log(\"hello\");\n\tconst available = await vscode.lm.selectChatModels({});\n\tavailable.forEach(m => {\n\t\tconsole.log(`VENDOR: ${m.vendor} | FAMILY: ${m.family} | VERSION: ${m.version} | ID: ${m.id}`);\n\t});\n\tconst config = vscode.workspace.getConfiguration('inlineChat');\n\tconst defaultModel = config.get<string>('defaultModel');\n\tconsole.log(defaultModel);\n\tconst [model] = await vscode.lm.selectChatModels(available[4]);\n\n\tif (model) {\n\t\tconst promtmessage = [\n\t\t\tvscode.LanguageModelChatMessage.User(`Analyze the following code and explain it shortly and compactly step by step. please do put some text in the explanation and make sure to make it readable to beginning programmers. also, make sure to\n\t\t\t\t  make it into in markdown format with code blocks that have the right language tag so the colors are right too.\n\t\t\t\t devide it with lines between each step and make sure that i could easily make a screenshot of each step and make it into a powerpoint dont put anything else than the markdown content and make sure to use code blocks with the right language tag for the code snippets.\n\t\t\t\t also make sure there arent any empty code blocks and that all code blocks have the right language tag for the code inside and that they wont show the.\n\t\t\t\t don't use any comments for expleanation inside the code blocks just put the code and explain everything in the text outside the code blocks make sure to make it nice and consisten and use ### for titles.\n\t\t\t\t :\\n\\n${context}`)\n\t\t];\n\t\ttry {\n\t\t\tconst response = await model.sendRequest(promtmessage);\n\t\t\tif (response) {\n\t\t\t\tlet fullText = '';\n\n\t\t\t\t// You must iterate through the fragments because .text is a stream\n\t\t\t\tfor await (const fragment of response.text) {\n\t\t\t\t\tfullText += fragment;\n\t\t\t\t}\n\t\t\t\treturn fullText; // Now you have the complete string\n\t\t\t} else {\n\t\t\t\treturn \"Sorry, I couldn't generate an explanation for the selected code.\";\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tif (error instanceof vscode.LanguageModelError) {\n\t\t\t\tif (error.code === 'QuotaExceeded') {\n\t\t\t\t\treturn \"### ⚠️ Subscription Limit Reached\\nYou have run out of Copilot tokens for now. Please check your plan.\";\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn \"\\n### step 1\\n```javascript\\nconsole.log('hello world');\\n```\\n\\n### step 2\\n```python\\ndef greet():\\n    print('Hello, World!')\\n```\";\n\t\t}\n\t} else {\n\t\treturn `Sorry, I couldn't find a suitable language model to generate the explanation.`;\n\t}\n}\nasync function showExplanationMarkdown(context: vscode.ExtensionContext, selectedText: string) {\n  const markdownContent = await explainCodeInMarkdown(selectedText);\n  \n  // Create ONE webview panel\n  const panel = vscode.window.createWebviewPanel(\n    'codeExplanation',\n    'Code Explanation',\n    vscode.ViewColumn.Active,\n    {\n      enableScripts: true,\n      retainContextWhenHidden: true,\n      localResourceRoots: [vscode.Uri.joinPath(context.extensionUri, 'webview', 'dist')]\n    }\n  );\n\n  // Load the React app HTML\n  const htmlPath = path.join(context.extensionUri.fsPath, 'webview', 'dist', 'index.html');\n  let html = fs.readFileSync(htmlPath, 'utf-8');\n  \n  html = html.replace(\n    /src=\"\\/assets\\/([^\"]+)\"/g,\n    (match, filename) => {\n      const fileUri = panel.webview.asWebviewUri(\n        vscode.Uri.joinPath(context.extensionUri, 'webview', 'dist', 'assets', filename)\n      );\n      return `src=\"${fileUri}\"`;\n    }\n  );\n  \n  // Inject markdown into the HTML\n  html = html.replace(\n    '</body>',\n    `<script>window.markdownContent = ${JSON.stringify(markdownContent)};</script></body>`\n  );\n  \n  panel.webview.html = html;\n\n  /*// Optional: Also create the markdown preview\n  let filename = await vscode.window.showInputBox({\n    prompt: \"Enter a filename for the explanation\",\n    value: \"explanation.md\"\n  });\n  \n  if (filename) {\n    const uri = vscode.Uri.parse(`untitled:${filename}`);\n    const doc = await vscode.workspace.openTextDocument(uri);\n    const edit = new vscode.WorkspaceEdit();\n    edit.insert(uri, new vscode.Position(0, 0), markdownContent);\n    await vscode.workspace.applyEdit(edit);\n    await vscode.window.showTextDocument(doc, { preview: true, viewColumn: vscode.ViewColumn.Two });\n    await vscode.commands.executeCommand('markdown.showPreview', uri);\n  }*/\n}\n// This method is called when your extension is deactivated\nexport function deactivate() { }\n","module.exports = require(\"vscode\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["context","console","log","disposable","vscode","commands","registerCommand","async","editor","window","activeTextEditor","selection","selectedText","document","getText","markdownContent","available","lm","selectChatModels","forEach","m","vendor","family","version","id","defaultModel","workspace","getConfiguration","get","model","promtmessage","LanguageModelChatMessage","User","response","sendRequest","fullText","fragment","text","error","LanguageModelError","code","explainCodeInMarkdown","panel","createWebviewPanel","ViewColumn","Active","enableScripts","retainContextWhenHidden","localResourceRoots","Uri","joinPath","extensionUri","htmlPath","path","join","fsPath","html","fs","readFileSync","replace","match","filename","webview","asWebviewUri","JSON","stringify","showExplanationMarkdown","showInformationMessage","subscriptions","push","module","exports","require","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"sourceRoot":""}