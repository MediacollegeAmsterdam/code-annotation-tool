(()=>{"use strict";var e={265(e,t,n){var o,i=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),a=0;a<n.length;a++)"default"!==n[a]&&i(t,e,n[a]);return r(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){const t=l.commands.registerCommand("cat.explainCode",async()=>{const t=l.window.activeTextEditor;if(!t)return;const n=t.selection,o=t.document.getText(n);o?await l.window.withProgress({location:l.ProgressLocation.Notification,title:"Generating Visual Explanation...",cancellable:!1},async()=>{const t=await async function(e){try{const t=(await l.lm.selectChatModels({family:"gpt-4"}))[0]||(await l.lm.selectChatModels({}))[0];if(!t)return"No model available.";const n=[l.LanguageModelChatMessage.User(`Explain this code step-by-step for a beginner. \n                Use Markdown. Each step should have one code block and one explanation.\n                Format: \n                ### Title\n                \`\`\`language\n                code\n                \`\`\`\n                Explanation text here.\n                \n                Code:\n                ${e}`)],o=await t.sendRequest(n);let i="";for await(const e of o.text)i+=e;return i}catch(e){return console.error(e),"### Error\n```javascript\n// Error generating explanation\n```\nCould not connect to AI."}}(o);u?(u.reveal(l.ViewColumn.Active),u.webview.postMessage({type:"newExplanation",content:t})):function(e,t){u=l.window.createWebviewPanel("codeExplanation","Code Explanation Slides",l.ViewColumn.Beside,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[l.Uri.joinPath(e.extensionUri,"webview","dist")]});const n=s.join(e.extensionUri.fsPath,"webview","dist","index.html");let o=c.readFileSync(n,"utf-8");o=o.replace(/src="\/assets\/([^"]+)"/g,(t,n)=>`src="${u.webview.asWebviewUri(l.Uri.joinPath(e.extensionUri,"webview","dist","assets",n))}"`),o=o.replace("</body>",`<script>window.markdownContent = ${JSON.stringify(t)};<\/script></body>`),u.webview.html=o,u.onDidDispose(()=>{u=void 0},null,e.subscriptions)}(e,t)}):l.window.showInformationMessage("Please select some code first!")});e.subscriptions.push(t)},t.deactivate=function(){};const s=a(n(928)),c=a(n(896)),l=a(n(398));let u},398(e){e.exports=require("vscode")},896(e){e.exports=require("fs")},928(e){e.exports=require("path")}},t={},n=function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(265);module.exports=n})();